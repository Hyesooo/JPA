# 05. 연관관계매핑기초

### ✔️ 5.1. 단방향 연관관계
- 참조를 사용하는 객체의 연관관계는 단방향이다.
- 외래 키를 사용하는 테이블의 연관관계는 양방향이다.
- 객체를 양방향으로 참조하려면 단방향 연관관계를 2개 만들어야한다.
- 객체의 참조를 사용해여 연관관계를 탐색하는것을 객체 그래프 탐색이라 한다.
- 외래 키를 사용해서 연관관계를 탐색하는 것을 조인이라 한다.
- @ManyToOne

### ✔️ 5.3. 양방향 연관관계
- @OneToMany, mappedBy

### ✔️ 5.4. 연관관계의 주인
- 두 객체 연관관계 중 하나를 정해서 테이블의 외래키를 관리해야 하는데 이것을 연관관계의 주인이라고 한다.
- 주인은 mappedBy속성을 사용하지 않는다.
- 주인이 아니면 mappedBy속성을 사용해서 속성의 값으로 연관관계의 주인을 지정해야한다.
- 연관관계의 주인을 정한다는 것은 사실 외래 키 관리자를 선택하는 것이다.
- 연관관계의 주인은 외래 키가 있는곳(물리적으로 전혀 다른 테이블의 외래 키를 관리해야하기 때문.)
- 연관관계의 주인만 디비 연관관계와 매핑되고 외래 키를 관리할 수 있다. 반대편은 읽기만 가능하고 외래키를 변경하지는 못한다.

### ✔️ 5.4. 양방향 연관관계의 주의점
- 객체의 양방향 연관관계는 양쪽 모두 관계를 맺어주자
- Entity class에 편의 setter를 생성하여 해결
- 연관관계 변경시에 기존 팀이 있으면 기존 팀과 회원의 연관관계를 삭제하는 코드를 추가해야된다는 점 유의

### ✔️ 결론
- 양방향의 장점은 반대방향으로 객체 그래프 탐색기능이 추가된 것 뿐.
- 양방향은 객체에서 양쪽 방향을 모두 관리해야함.
- 따라서 현업에서는 우선 단방향을 사용하고 반대 방향으로의 객체 그래프탐색이 필요할때 양방향을 세팅해서 사용하는 것을 권장.
- 연관관계의 주인은 외래 키의 물리적인 위치로 선정해야지 비즈니스 중요도로 선정하면 안됨.
- 양방향 매핑시에는 무한루프에 빠지지 않게 조심.



